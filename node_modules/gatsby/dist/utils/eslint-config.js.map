{"version":3,"sources":["../../src/utils/eslint-config.ts"],"names":["eslintRulePaths","path","resolve","__dirname","eslintRequirePreset","require","eslintRequiredConfig","rulePaths","useEslintrc","baseConfig","parserOptions","ecmaVersion","sourceType","ecmaFeatures","jsx","globals","graphql","__PATH_PREFIX__","__BASE_PATH__","extends","mergeRequiredConfigIn","existingOptions","Array","isArray","includes","push","eslintConfig","schema","usingJsxRuntime","resolvePluginsRelativeTo","plugins","rules","env","schemaString","commentDescriptions","tagName","ignoreElements","ignoreRoles","includeRoles","tabbable","body","iframe","img"],"mappings":"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","sourcesContent":["import { printSchema, GraphQLSchema } from \"graphql\"\nimport { CLIEngine } from \"eslint\"\nimport path from \"path\"\n\nconst eslintRulePaths = path.resolve(`${__dirname}/eslint-rules`)\nconst eslintRequirePreset = require.resolve(`./eslint/required`)\n\nexport const eslintRequiredConfig: CLIEngine.Options = {\n  rulePaths: [eslintRulePaths],\n  useEslintrc: false,\n  baseConfig: {\n    parserOptions: {\n      ecmaVersion: 2018,\n      sourceType: `module`,\n      ecmaFeatures: {\n        jsx: true,\n      },\n    },\n    globals: {\n      graphql: true,\n      __PATH_PREFIX__: true,\n      __BASE_PATH__: true, // this will rarely, if ever, be used by consumers\n    },\n    extends: [eslintRequirePreset],\n  },\n}\n\nexport function mergeRequiredConfigIn(\n  existingOptions: CLIEngine.Options\n): void {\n  // make sure rulePaths include our custom rules\n  if (existingOptions.rulePaths) {\n    if (\n      Array.isArray(existingOptions.rulePaths) &&\n      !existingOptions.rulePaths.includes(eslintRulePaths)\n    ) {\n      existingOptions.rulePaths.push(eslintRulePaths)\n    }\n  } else {\n    existingOptions.rulePaths = [eslintRulePaths]\n  }\n\n  // make sure we extend required preset\n  if (!existingOptions.baseConfig) {\n    existingOptions.baseConfig = {}\n  }\n\n  if (existingOptions.baseConfig.extends) {\n    if (\n      Array.isArray(existingOptions.baseConfig.extends) &&\n      !existingOptions.baseConfig.extends.includes(eslintRequirePreset)\n    ) {\n      existingOptions.baseConfig.extends.push(eslintRequirePreset)\n    } else if (\n      typeof existingOptions.baseConfig.extends === `string` &&\n      existingOptions.baseConfig.extends !== eslintRequirePreset\n    ) {\n      existingOptions.baseConfig.extends = [\n        existingOptions.baseConfig.extends,\n        eslintRequirePreset,\n      ]\n    }\n  } else {\n    existingOptions.baseConfig.extends = [eslintRequirePreset]\n  }\n}\n\nexport const eslintConfig = (\n  schema: GraphQLSchema,\n  usingJsxRuntime: boolean\n): CLIEngine.Options => {\n  return {\n    useEslintrc: false,\n    resolvePluginsRelativeTo: __dirname,\n    rulePaths: [eslintRulePaths],\n    baseConfig: {\n      globals: {\n        graphql: true,\n        __PATH_PREFIX__: true,\n        __BASE_PATH__: true, // this will rarely, if ever, be used by consumers\n      },\n      extends: [\n        require.resolve(`eslint-config-react-app`),\n        eslintRequirePreset,\n      ],\n      plugins: [`graphql`],\n      rules: {\n        // New versions of react use a special jsx runtime that remove the requirement\n        // for having react in scope for jsx. Once the jsx runtime is backported to all\n        // versions of react we can make this always be `off`.\n        // I would also assume that eslint-config-react-app will switch their flag to `off`\n        // when jsx runtime is stable in all common versions of React.\n        \"react/react-in-jsx-scope\": usingJsxRuntime ? `off` : `error`, // Conditionally apply for reactRuntime?\n        \"import/no-webpack-loader-syntax\": [0],\n        \"graphql/template-strings\": [\n          `error`,\n          {\n            env: `relay`,\n            schemaString: printSchema(schema, { commentDescriptions: true }),\n            tagName: `graphql`,\n          },\n        ],\n        \"react/jsx-pascal-case\": `warn`,\n        // https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/tree/master/docs/rules\n        \"jsx-a11y/accessible-emoji\": `warn`,\n        \"jsx-a11y/alt-text\": `warn`,\n        \"jsx-a11y/anchor-has-content\": `warn`,\n        \"jsx-a11y/anchor-is-valid\": `warn`,\n        \"jsx-a11y/aria-activedescendant-has-tabindex\": `warn`,\n        \"jsx-a11y/aria-props\": `warn`,\n        \"jsx-a11y/aria-proptypes\": `warn`,\n        \"jsx-a11y/aria-role\": `warn`,\n        \"jsx-a11y/aria-unsupported-elements\": `warn`,\n        // TODO: It looks like the `autocomplete-valid` rule hasn't been published yet\n        // \"jsx-a11y/autocomplete-valid\": [\n        //   \"warn\",\n        //   {\n        //     inputComponents: [],\n        //   },\n        // ],\n        \"jsx-a11y/click-events-have-key-events\": `warn`,\n        \"jsx-a11y/control-has-associated-label\": [\n          `warn`,\n          {\n            ignoreElements: [\n              `audio`,\n              `canvas`,\n              `embed`,\n              `input`,\n              `textarea`,\n              `tr`,\n              `video`,\n            ],\n            ignoreRoles: [\n              `grid`,\n              `listbox`,\n              `menu`,\n              `menubar`,\n              `radiogroup`,\n              `row`,\n              `tablist`,\n              `toolbar`,\n              `tree`,\n              `treegrid`,\n            ],\n            includeRoles: [`alert`, `dialog`],\n          },\n        ],\n        \"jsx-a11y/heading-has-content\": `warn`,\n        \"jsx-a11y/html-has-lang\": `warn`,\n        \"jsx-a11y/iframe-has-title\": `warn`,\n        \"jsx-a11y/img-redundant-alt\": `warn`,\n        \"jsx-a11y/interactive-supports-focus\": [\n          `warn`,\n          {\n            tabbable: [\n              `button`,\n              `checkbox`,\n              `link`,\n              `progressbar`,\n              `searchbox`,\n              `slider`,\n              `spinbutton`,\n              `switch`,\n              `textbox`,\n            ],\n          },\n        ],\n        // \"jsx-a11y/label-has-for\": `warn`, was deprecated and replaced with jsx-a11y/has-associated-control in v6.1.0\n        \"jsx-a11y/label-has-associated-control\": `warn`,\n        \"jsx-a11y/lang\": `warn`,\n        \"jsx-a11y/media-has-caption\": `warn`,\n        \"jsx-a11y/mouse-events-have-key-events\": `warn`,\n        \"jsx-a11y/no-access-key\": `warn`,\n        \"jsx-a11y/no-autofocus\": `warn`,\n        \"jsx-a11y/no-distracting-elements\": `warn`,\n        \"jsx-a11y/no-interactive-element-to-noninteractive-role\": `warn`,\n        \"jsx-a11y/no-noninteractive-element-interactions\": [\n          `warn`,\n          {\n            body: [`onError`, `onLoad`],\n            iframe: [`onError`, `onLoad`],\n            img: [`onError`, `onLoad`],\n          },\n        ],\n        \"jsx-a11y/no-noninteractive-element-to-interactive-role\": `warn`,\n        \"jsx-a11y/no-noninteractive-tabindex\": `warn`,\n        \"jsx-a11y/no-onchange\": `warn`,\n        \"jsx-a11y/no-redundant-roles\": `warn`,\n        \"jsx-a11y/no-static-element-interactions\": `warn`,\n        \"jsx-a11y/role-has-required-aria-props\": `warn`,\n        \"jsx-a11y/role-supports-aria-props\": `warn`,\n        \"jsx-a11y/scope\": `warn`,\n        \"jsx-a11y/tabindex-no-positive\": `warn`,\n      },\n    },\n  }\n}\n"],"file":"eslint-config.js"}